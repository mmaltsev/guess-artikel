import{d as ze,e as Oe,Q as oe,f as Ie}from"./use-quasar.8f50ecf4.js";import{l as V,a8 as ne,a9 as pe,aa as ye,p as j,m as Ke,a as h,ab as H,c as we,i as E,C as Re,ac as Ne,h as b,ad as We,ae as je,af as Ue,R as p,q as y,J as Ye,ag as Ge,I as be,v as le,T as ie,b as Xe,ah as Je,O as Ze,d as _e,u as et,ai as tt,o as qe,_ as ot,$ as D,f as c,N as nt,aj as lt,ak as it,Q as $,w as T,g as se,L as st,e as at}from"./index.da6493bb.js";import{r as ae,a as rt,b as ut,Q as ct,u as dt}from"./useAuth.e93878d9.js";import{u as ft,a as mt,b as vt,Q as gt,c as ht}from"./use-model-toggle.ae0e8aa3.js";import{b as pt,a as yt,h as wt}from"./scroll.97dfa23a.js";function bt(e,t,o){let n;function l(){n!==void 0&&(ne.remove(n),n=void 0)}return V(()=>{e.value===!0&&l()}),{removeFromHistory:l,addToHistory(){n={condition:()=>o.value===!0,handler:t},ne.add(n)}}}function _t(){let e=null;const t=j();function o(){e!==null&&(clearTimeout(e),e=null)}return pe(o),V(o),{removeTimeout:o,registerTimeout(n,l){o(),ye(t)===!1&&(e=setTimeout(()=>{e=null,n()},l))}}}function qt(){let e;const t=j();function o(){e=void 0}return pe(o),V(o),{removeTick:o,registerTick(n){e=n,Ke(()=>{e===n&&(ye(t)===!1&&e(),e=void 0)})}}}const kt={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Tt(e,t=()=>{},o=()=>{}){return{transitionProps:h(()=>{const n=`q-transition--${e.transitionShow||t()}`,l=`q-transition--${e.transitionHide||o()}`;return{appear:!0,enterFromClass:`${n}-enter-from`,enterActiveClass:`${n}-enter-active`,enterToClass:`${n}-enter-to`,leaveFromClass:`${l}-leave-from`,leaveActiveClass:`${l}-leave-active`,leaveToClass:`${l}-leave-to`}}),transitionStyle:h(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const A=[];function Et(e){return A.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function Pt(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return H(e)}else if(e.__qPortal===!0){const o=H(e);return o!==void 0&&o.$options.name==="QPopupProxy"?(e.hide(t),o):e}e=H(e)}while(e!=null)}function Ct(e,t,o){for(;o!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(o--,e.$options.name==="QMenu"){e=Pt(e,t);continue}e.hide(t)}e=H(e)}}const St=we({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function xt(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Lt(e,t,o,n){const l=E(!1),a=E(!1);let s=null;const f={},d=n==="dialog"&&xt(e);function m(r){if(r===!0){ae(f),a.value=!0;return}a.value=!1,l.value===!1&&(d===!1&&s===null&&(s=je(!1,n)),l.value=!0,A.push(e.proxy),rt(f))}function v(r){if(a.value=!1,r!==!0)return;ae(f),l.value=!1;const g=A.indexOf(e.proxy);g!==-1&&A.splice(g,1),s!==null&&(Ue(s),s=null)}return Re(()=>{v(!0)}),e.proxy.__qPortal=!0,Ne(e.proxy,"contentEl",()=>t.value),{showPortal:m,hidePortal:v,portalIsActive:l,portalIsAccessible:a,renderPortal:()=>d===!0?o():l.value===!0?[b(We,{to:s},b(St,o))]:void 0}}let S=0,R,N,x,W=!1,re,ue,ce,w=null;function Bt(e){Dt(e)&&Ye(e)}function Dt(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=Ge(e),o=e.shiftKey&&!e.deltaX,n=!o&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),l=o||n?e.deltaY:e.deltaX;for(let a=0;a<t.length;a++){const s=t[a];if(wt(s,n))return n?l<0&&s.scrollTop===0?!0:l>0&&s.scrollTop+s.clientHeight===s.scrollHeight:l<0&&s.scrollLeft===0?!0:l>0&&s.scrollLeft+s.clientWidth===s.scrollWidth}return!0}function de(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function F(e){W!==!0&&(W=!0,requestAnimationFrame(()=>{W=!1;const{height:t}=e.target,{clientHeight:o,scrollTop:n}=document.scrollingElement;(x===void 0||t!==window.innerHeight)&&(x=o-t,document.scrollingElement.scrollTop=n),n>x&&(document.scrollingElement.scrollTop-=Math.ceil((n-x)/8))}))}function fe(e){const t=document.body,o=window.visualViewport!==void 0;if(e==="add"){const{overflowY:n,overflowX:l}=window.getComputedStyle(t);R=pt(window),N=yt(window),re=t.style.left,ue=t.style.top,ce=window.location.href,t.style.left=`-${R}px`,t.style.top=`-${N}px`,l!=="hidden"&&(l==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),n!=="hidden"&&(n==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,p.is.ios===!0&&(o===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",F,y.passiveCapture),window.visualViewport.addEventListener("scroll",F,y.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",de,y.passiveCapture))}p.is.desktop===!0&&p.is.mac===!0&&window[`${e}EventListener`]("wheel",Bt,y.notPassive),e==="remove"&&(p.is.ios===!0&&(o===!0?(window.visualViewport.removeEventListener("resize",F,y.passiveCapture),window.visualViewport.removeEventListener("scroll",F,y.passiveCapture)):window.removeEventListener("scroll",de,y.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=re,t.style.top=ue,window.location.href===ce&&window.scrollTo(R,N),x=void 0)}function $t(e){let t="add";if(e===!0){if(S++,w!==null){clearTimeout(w),w=null;return}if(S>1)return}else{if(S===0||(S--,S>0))return;if(t="remove",p.is.ios===!0&&p.is.nativeMobile===!0){w!==null&&clearTimeout(w),w=setTimeout(()=>{fe(t),w=null},100);return}}fe(t)}function Ft(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,$t(t))}}}const _=[];let P;function Qt(e){P=e.keyCode===27}function Ht(){P===!0&&(P=!1)}function At(e){P===!0&&(P=!1,be(e,27)===!0&&_[_.length-1](e))}function ke(e){window[e]("keydown",Qt),window[e]("blur",Ht),window[e]("keyup",At),P=!1}function Vt(e){p.is.desktop===!0&&(_.push(e),_.length===1&&ke("addEventListener"))}function me(e){const t=_.indexOf(e);t!==-1&&(_.splice(t,1),_.length===0&&ke("removeEventListener"))}const q=[];function Te(e){q[q.length-1](e)}function Mt(e){p.is.desktop===!0&&(q.push(e),q.length===1&&document.body.addEventListener("focusin",Te))}function ve(e){const t=q.indexOf(e);t!==-1&&(q.splice(t,1),q.length===0&&document.body.removeEventListener("focusin",Te))}let Q=0;const zt={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},ge={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Ot=we({name:"QDialog",inheritAttrs:!1,props:{...ft,...kt,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...mt,"shake","click","escapeKey"],setup(e,{slots:t,emit:o,attrs:n}){const l=j(),a=E(null),s=E(!1),f=E(!1);let d=null,m=null,v,r;const g=h(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:U}=Ft(),{registerTimeout:Y}=_t(),{registerTick:Ee,removeTick:G}=qt(),{transitionProps:Pe,transitionStyle:X}=Tt(e,()=>ge[e.position][0],()=>ge[e.position][1]),Ce=h(()=>X.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:J,hidePortal:Z,portalIsAccessible:Se,renderPortal:xe}=Lt(l,a,Me,"dialog"),{hide:L}=vt({showing:s,hideOnRouteChange:g,handleShow:Qe,handleHide:He,processOnMount:!0}),{addToHistory:Le,removeFromHistory:Be}=bt(s,L,g),De=h(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${zt[e.position]}`+(f.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),B=h(()=>s.value===!0&&e.seamless!==!0),$e=h(()=>e.autoClose===!0?{onClick:Ae}:{}),Fe=h(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${B.value===!0?"modal":"seamless"}`,n.class]);le(()=>e.maximized,i=>{s.value===!0&&O(i)}),le(B,i=>{U(i),i===!0?(Mt(I),Vt(z)):(ve(I),me(z))});function Qe(i){Le(),m=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,O(e.maximized),J(),f.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),Ee(C)):G(),Y(()=>{if(l.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:u,bottom:k}=document.activeElement.getBoundingClientRect(),{innerHeight:te}=window,K=window.visualViewport!==void 0?window.visualViewport.height:te;u>0&&k>K/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-K,k>=te?1/0:Math.ceil(document.scrollingElement.scrollTop+k-K/2))),document.activeElement.scrollIntoView()}r=!0,a.value.click(),r=!1}J(!0),f.value=!1,o("show",i)},e.transitionDuration)}function He(i){G(),Be(),ee(!0),f.value=!0,Z(),m!==null&&(((i&&i.type.indexOf("key")===0?m.closest('[tabindex]:not([tabindex^="-"])'):void 0)||m).focus(),m=null),Y(()=>{Z(!0),f.value=!1,o("hide",i)},e.transitionDuration)}function C(i){ut(()=>{let u=a.value;if(u!==null){if(i!==void 0){const k=u.querySelector(i);if(k!==null){k.focus({preventScroll:!0});return}}u.contains(document.activeElement)!==!0&&(u=u.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||u.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||u.querySelector("[autofocus], [data-autofocus]")||u,u.focus({preventScroll:!0}))}})}function M(i){i&&typeof i.focus=="function"?i.focus({preventScroll:!0}):C(),o("shake");const u=a.value;u!==null&&(u.classList.remove("q-animate--scale"),u.classList.add("q-animate--scale"),d!==null&&clearTimeout(d),d=setTimeout(()=>{d=null,a.value!==null&&(u.classList.remove("q-animate--scale"),C())},170))}function z(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&M():(o("escapeKey"),L()))}function ee(i){d!==null&&(clearTimeout(d),d=null),(i===!0||s.value===!0)&&(O(!1),e.seamless!==!0&&(U(!1),ve(I),me(z))),i!==!0&&(m=null)}function O(i){i===!0?v!==!0&&(Q<1&&document.body.classList.add("q-body--dialog"),Q++,v=!0):v===!0&&(Q<2&&document.body.classList.remove("q-body--dialog"),Q--,v=!1)}function Ae(i){r!==!0&&(L(i),o("click",i))}function Ve(i){e.persistent!==!0&&e.noBackdropDismiss!==!0?L(i):e.noShake!==!0&&M()}function I(i){e.allowFocusOutside!==!0&&Se.value===!0&&Je(a.value,i.target)!==!0&&C('[tabindex]:not([tabindex="-1"])')}Object.assign(l.proxy,{focus:C,shake:M,__updateRefocusTarget(i){m=i||null}}),V(ee);function Me(){return b("div",{role:"dialog","aria-modal":B.value===!0?"true":"false",...n,class:Fe.value},[b(ie,{name:"q-transition--fade",appear:!0},()=>B.value===!0?b("div",{class:"q-dialog__backdrop fixed-full",style:Ce.value,"aria-hidden":"true",tabindex:-1,onClick:Ve}):null),b(ie,Pe.value,()=>s.value===!0?b("div",{ref:a,class:De.value,style:X.value,tabindex:-1,...$e.value},Xe(t.default)):null)])}return xe}});function he(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var It=Ze({name:"close-popup",beforeMount(e,{value:t}){const o={depth:he(t),handler(n){o.depth!==0&&setTimeout(()=>{const l=Et(e);l!==void 0&&Ct(l,n,o.depth)})},handlerKey(n){be(n,13)===!0&&o.handler(n)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:t,oldValue:o}){t!==o&&(e.__qclosepopup.depth=he(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});const Kt={class:"column justify-between"},Rt={class:"column items-center"},Nt={class:"row items-center q-py-md"},Wt={class:"column items-left q-pb-md"},jt=_e({__name:"ProfileInfo",setup(e){const{logout:t}=dt(),o=et(),n=E(!1),l=ze(),a=tt.currentUser,s=a==null?void 0:a.email,f=async()=>{try{await t()}finally{o.push("/")}},d=()=>{n.value=!0},m=async()=>{try{a?(await a.delete(),l.notify({type:"positive",message:"Your account has been deleted successfully."}),o.push("/")):l.notify({type:"negative",message:"No user is currently signed in."})}catch(v){if(v.code==="auth/requires-recent-login"){l.notify({type:"negative",message:"Security alert: you need to login again before deleting your account."});try{await t()}finally{o.push("/login")}}else l.notify({type:"negative",message:"Couldn't delete account. Please try again."})}finally{n.value=!1}};return(v,r)=>(qe(),ot("div",Kt,[D("div",Rt,[c(nt,{name:"account_circle",color:"indigo-2",size:"10rem"}),D("div",Nt,[r[2]||(r[2]=D("div",{style:{"font-size":"1.2em"},class:"q-pr-md"},"Email",-1)),c(ct,{filled:"",dense:"",modelValue:lt(s),"onUpdate:modelValue":r[0]||(r[0]=g=>it(s)?s.value=g:null),readonly:""},null,8,["modelValue"])]),c($,{onClick:f,label:"Logout",color:"warning",dense:"",outline:"",class:"full-width q-mt-sm"})]),D("div",Wt,[c(gt),c($,{onClick:d,label:"Delete Account",color:"negative",outline:"",dense:"",class:"full-width q-mt-md"}),c(Ot,{modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=g=>n.value=g)},{default:T(()=>[c(Oe,null,{default:T(()=>[c(oe,{class:"text-h6"},{default:T(()=>r[3]||(r[3]=[se(" Confirm Account Deletion ")])),_:1}),c(oe,null,{default:T(()=>r[4]||(r[4]=[se(" Are you sure you want to delete your account? This action cannot be undone. ")])),_:1}),c(ht,{align:"right"},{default:T(()=>[st(c($,{flat:"",label:"Cancel",color:"primary"},null,512),[[It]]),c($,{flat:"",label:"Delete",color:"negative",onClick:m})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]))}}),Zt=_e({name:"ProfilePage",__name:"ProfilePage",setup(e){return(t,o)=>(qe(),at(Ie,{class:"q-pa-md flex justify-center"},{default:T(()=>[c(jt)]),_:1}))}});export{Zt as default};
